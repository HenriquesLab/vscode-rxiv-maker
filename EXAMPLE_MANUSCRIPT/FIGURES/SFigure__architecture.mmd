---
config:
  theme: base
  themeVariables:
    fontFamily: 'Arial, Helvetica, sans-serif'
    fontSize: 14px
    primaryColor: '#ffffff'
    primaryTextColor: '#333333'
    primaryBorderColor: '#cccccc'
    lineColor: '#666666'
    background: '#ffffff'
  layout: elk
---
flowchart TD
 subgraph A[" "]
    direction TB
      A1["ğŸ“„ Manuscript Files<br>â€¢ 01_MAIN.md<br>â€¢ 02_SUPPLEMENTARY.md<br>â€¢ 00_CONFIG.yml"]
      A2["ğŸ“š References<br>â€¢ 03_REFERENCES.bib<br>â€¢ Citation Management"]
      A3["ğŸ¨ Figure Sources<br>â€¢ Python Scripts (.py)<br>â€¢ Mermaid Diagrams (.mmd)<br>â€¢ Data Files (.csv, .json)<br>â€¢ Static Files (.png, .jpg, .svg)"]
  end

 subgraph CORE["ğŸ”„ Core Processing Pipeline"]
    direction TB
    subgraph B1[Parsing Stage]
      direction LR
          B1A["ğŸ“ Markdown<br>Parser"]
          B1B["ğŸ“‹ YAML<br>Parser"]
          B1C["ğŸ“š BibTeX<br>Parser"]
    end
    subgraph B2[Conversion Stage]
      direction LR
          B2A["ğŸ”„ MD to LaTeX<br>Converter"]
          B2B["ğŸ¯ Figure<br>Processor"]
          B2C["ğŸ“Š Table<br>Processor"]
          B2D["ğŸ”— Citation<br>Processor"]
    end
    subgraph B3[Generation Stage]
      direction LR
          B3A["ğŸ¨ Dynamic Figure<br>Generation"]
          B3B["ğŸ“ Template<br>Assembly"]
          B3C["ğŸ­ Style<br>Application"]
    end
    subgraph C[Compilation Stage]
      direction LR
          C1["ğŸ”§ LaTeX Engine<br>pdflatex/xelatex"]
          C2["ğŸ“– Bibliography<br>BibTeX"]
          C3["ğŸ” Final<br>Processing"]
    end
  end

 subgraph D[" "]
    direction TB
        D1["ğŸ“„ Publication PDF<br>â€¢ Camera-ready document<br>â€¢ Professional formatting<br>â€¢ Embedded figures"]
        D2["ğŸ“ LaTeX Source<br>â€¢ Generated .tex files<br>â€¢ Style definitions<br>â€¢ Asset references"]
        D3["ğŸ“‹ Build Artifacts<br>â€¢ Auxiliary files<br>â€¢ Build logs<br>â€¢ Debug information"]
  end

 subgraph DEPLOY["ğŸš€ Deployment Environments"]
    direction TB
    subgraph LOCAL["ğŸ’» Local Execution"]
      direction TB
      L1["ğŸ”§ Native Installation<br>â€¢ Direct system access<br>â€¢ Optimal performance<br>â€¢ Development debugging"]
      L2["ğŸ³ Docker Engine Mode<br>â€¢ Pre-configured LaTeX<br>â€¢ Containerised dependencies<br>â€¢ Reproducible environment"]
    end
    subgraph CLOUD["â˜ï¸ Cloud Execution"]
      direction TB
      C1_CLOUD["âš™ï¸ GitHub Actions CI/CD<br>â€¢ Automated triggers<br>â€¢ Cloud compute resources<br>â€¢ Artifact storage"]
      C2_CLOUD["ğŸ““ Google Colab Interactive<br>â€¢ Web-based interface<br>â€¢ Real-time feedback<br>â€¢ Interactive development"]
    end
  end

    A1 --> B1A & B1B
    A2 --> B1C
    A3 --> B3A
    B1A --> B2A
    B1B --> B2A
    B1C --> B2D
    B2A --> B3B
    B2B --> B3B
    B2C --> B3B
    B2D --> B3B & C2
    B3A --> B2B
    B3B --> B3C
    B3C --> C1
    C1 --> C3 & D2 & D3
    C2 --> C3
    C3 --> D1

    %% Show that deployment environments execute the core pipeline
    DEPLOY -.-> |"Executes"| CORE
    A -.-> |"Input to"| DEPLOY
    DEPLOY -.-> |"Produces"| D

    A1:::componentBox
    A2:::componentBox
    A3:::componentBox
    B1A:::componentBox
    B1B:::componentBox
    B1C:::componentBox
    B2A:::componentBox
    B2B:::componentBox
    B2C:::componentBox
    B2D:::componentBox
    B3A:::componentBox
    B3B:::componentBox
    B3C:::componentBox
    C1:::componentBox
    C2:::componentBox
    C3:::componentBox
    D1:::componentBox
    D2:::componentBox
    D3:::componentBox
    L1:::envBox
    L2:::envBox
    C1_CLOUD:::envBox
    C2_CLOUD:::envBox
    A:::inputBox
    CORE:::processBox
    D:::outputBox
    DEPLOY:::deployBox
    LOCAL:::localBox
    CLOUD:::cloudBox
    B1:::stageBox
    B2:::stageBox
    B3:::stageBox

    classDef inputBox fill:#e8f4fd,stroke:#1976d2,stroke-width:3px,color:#333
    classDef processBox fill:#fff8e1,stroke:#f57c00,stroke-width:3px,color:#333
    classDef outputBox fill:#fce4ec,stroke:#c2185b,stroke-width:3px,color:#333
    classDef deployBox fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px,color:#333
    classDef localBox fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#333
    classDef cloudBox fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#333
    classDef envBox fill:#ffffff,stroke:#666666,stroke-width:2px,color:#333
    classDef stageBox fill:#f5f5f5,stroke:#999999,stroke-width:2px,color:#333
    classDef componentBox fill:#ffffff,stroke:#666666,stroke-width:2px,color:#333
